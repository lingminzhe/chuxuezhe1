<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.grgbanking.counter.iam.dao.SysRoleDao">

    <select id="queryRoleIdList" resultType="com.grgbanking.counter.iam.entity.SysRoleEntity">
		select id,name,role_type,DESCRIPTION,IS_ENABLED,CREATED_BY,CREATION_DATE
		 from sys_role where CREATED_BY = #{createUserId}
	</select>
    <select id="queryRoleUserIdByCurrentUser" resultType="java.lang.Long">
        SELECT
	    r.user_id
        FROM
	    sys_org_user r
         WHERE
	       EXISTS ( SELECT 1 FROM SYS_ORG_USER u WHERE u.IS_LEADER = '1' AND u.user_id =#{userId} AND r.ORG_ID = u.ORG_ID )
	         AND r.IS_LEADER = '0'
	         AND EXISTS ( SELECT 1 FROM SYS_ROLE_USER rr WHERE rr.ROLE_ID =#{roleId} AND rr.USER_ID = r.USER_ID )
    </select>
</mapper>